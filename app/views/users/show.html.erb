<h1><%= current_user.name %>'s Profile</h1>

<div class="row">
  <div class="col-md-6 text-center">
    <h4>Neighborhood Watch</h4>
    <small>see if any of your follows are playing near you!</small>
    <%= image_tag("http://mike.teczno.com/img/google-maps-track.png", class: 'img-responsive') %>
  </div>
  <div class="col-md-6 text-center">
    <h4>Listen to who you follow!</h4>
    <small>music is not streamable via mobile at this time :'(</small>
    <iframe src="https://embed.spotify.com/?uri=spotify:trackset:My%20Follows:<%= @user.followed_artist_tracks %>" width="300" height="380" frameborder="0" allowtransparency="true"></iframe>
  </div>
</div>

<h3>My Follows</h3>
<div>
  <!-- Option to delete an individual follow, several follows or all follows at once -->
  <!-- UNDER CONSTRUCTION -->
  <% if current_user.follows.count >= 2 %>
    <%= button_tag("Unfollow All", class: 'btn btn-danger') %>
  <% end %>
  <!--  -->
  <% if current_user.follows.count == 0 %>
    <h5><em>your followed artists will be displayed here.</em></h5>
    <h5><em>maybe you should <%= link_to("search", artists_path) %> for some..</em></h5>
  <% else %>
    <h5><%= pluralize(current_user.follows.count, "artist") %> total</h5>
    <br>
    <% current_user.follows.each do |follow| %>
      <%= follow["artist_name"] %>
      
      <!-- button to unfollow an artist -->
      <div class="pull-right round_button">
        <div class="round_button_circle">
          <%= link_to("&times;".html_safe, artist_follow_path(follow["artist_id"], follow["id"]), method: :delete, data: { confirm: 'Are you sure you want to unfollow this artist?' }, class: 'round_button') %>
        </div>
      </div>

      <hr class="artists_hr">
    <% end %>
  <% end %>
</div>